ç¬¬03ç« .stm32å¼€å‘ç¯å¢ƒæ­å»ºğŸƒ
===========================================================

æœ¬ç« ä»‹ç»stm32å¼€å‘ç¯å¢ƒæ­å»º,ç¼–è¯‘å™¨keil5ã€å›¾å½¢åˆå§‹åŒ–é…ç½®è½¯ä»¶stm323cubemxã€ä¸‹è½½å™¨é©±åŠ¨ã€ä¸²å£é©±åŠ¨çš„å®‰è£….

2.1 keil mdkå®‰è£…ğŸƒ
-----------------------------------------------------------

keilè½¯ä»¶æ˜¯stm32å¼€å‘ä½¿ç”¨æœ€å¤šçš„è½¯ä»¶ä¹‹ä¸€,ä¹Ÿæœ‰ç”¨stm32cubeideã€iarç­‰è½¯ä»¶å¼€å‘stm32.è¿™é‡Œä¸ºäº†æ–¹ä¾¿åˆå­¦é€‰æ‹©keilä½œä¸ºIDE,å­¦è¿‡51å•ç‰‡æœºçš„åº”è¯¥çŸ¥é“keil,é‚£æ—¶å€™ä½¿ç”¨çš„æ˜¯keil4 for c51çš„ç‰ˆæœ¬,stm32å¼€å‘ä¸€èˆ¬ä½¿ç”¨keil5 for armçš„ç‰ˆæœ¬,ä¹Ÿè¢«å«åšmdk.

keilè½¯ä»¶çš„å®‰è£…,å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤,ç¬¬ä¸€ä¸ªæ˜¯è½¯ä»¶å®‰è£…,ç¬¬äºŒä¸ªæ˜¯è½¯ä»¶æ³¨å†Œ.ä¸‹é¢å¼€å§‹è¯´æ˜å¦‚ä½•å®‰è£…è¿™ä¸ªè½¯ä»¶.

1. å¼€å§‹å®‰è£…,"Next"å³å¯

.. figure:: ../media/keilå®‰è£…ç¬¬1æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

2. å‹¾é€‰"I agree to all the terms of the preceding License Agreement"

.. figure:: ../media/keilå®‰è£…ç¬¬2æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

3. é€‰æ‹©"Core"è½¯ä»¶å®‰è£…è·¯å¾„,"Pack"ä¸ºstm32 packåŒ…å®‰è£…è·¯å¾„

.. figure:: ../media/keilå®‰è£…ç¬¬3æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

4. å¡«å†™ç”¨æˆ·ä¿¡æ¯,ä»»æ„å‡å¯

.. figure:: ../media/keilå®‰è£…ç¬¬4æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

5. å¼€å§‹å®‰è£…,ç­‰å¾….è¿‡ç¨‹ä¸­è·³å‡ºå®‰è£…é©±åŠ¨é€‰æ‹©"å®‰è£…"å³å¯.

.. figure:: ../media/keilå®‰è£…ç¬¬5æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

6. å®Œæˆè½¯ä»¶å®‰è£….

.. figure:: ../media/keilå®‰è£…ç¬¬6æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

7. å®‰è£…packåŒ…ç•Œé¢.

.. figure:: ../media/keilå®‰è£…ç¬¬7æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

8. å®‰è£…stm32f1xxçš„packåŒ…

.. figure:: ../media/keilå®‰è£…ç¬¬8æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

9. keilæ³¨å†Œ,ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€è½¯ä»¶,"File"->"License Management..."

.. figure:: ../media/keilå®‰è£…ç¬¬9æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

10. æ‹·è´"CID"

.. figure:: ../media/keilå®‰è£…ç¬¬10æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

11. æ‰“å¼€æ³¨å†Œè½¯ä»¶,"Target"é€‰æ‹©ARM,ç²˜è´´"CID",ç‚¹å‡»"Generate"å³å¯ç”Ÿæˆç§˜é’¥,æ‹·è´ç§˜é’¥.

.. figure:: ../media/keilå®‰è£…ç¬¬11æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

12. å°†æ‹·è´çš„ç§˜é’¥å¤åˆ¶åˆ°keil.

.. figure:: ../media/keilå®‰è£…ç¬¬12æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center


2.2 stm323cubemxå®‰è£…ğŸƒ
-----------------------------------------------------------

åœ¨ç¬”è€…å¼€å§‹å­¦stm32çš„æ—¶å€™å¹¶ä¸éœ€è¦stm323cubemxè¿™ä¸ªè½¯ä»¶,å®‰è£…å®Œkeilå,è‡ªå·±æ–°å»ºä¸€ä¸ªstm32çš„å·¥ç¨‹å°±å¯ä»¥å¼€å‘äº†,ä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦è‡ªå·±æ–°å»ºä¸€ä¸ªå·¥ç¨‹,æ­¤å¤–ä¹Ÿéœ€è¦è‡ªå·±é…ç½®åº“,æ¯”å¦‚ç”¨åˆ°ä¸²å£,éœ€è¦è‡ªå·±æŸ¥æ‰¾ç›¸å…³çš„æ‰‹å†Œæˆ–è€…ä»å…¶ä»–ä»£ç ä¸­æ‹·è´å‡ºä¸²å£çš„é…ç½®å‡½æ•°.ä½†æ˜¯æœ‰äº†stm323cubemxè½¯ä»¶å,ä¸€åˆ‡ä¼¼ä¹å˜å¾—ç®€å•,æˆ‘ä»¬å¯ä»¥é€šè¿‡ç•Œé¢çš„æ–¹å¼é…ç½®å¤–è®¾,é…ç½®å®Œæˆåstm323cubemxè¿˜ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶,æˆ‘ä»¬åªéœ€è¦å¼€å‘åº”ç”¨ä»£ç å°±å¯ä»¥äº†,æå¤§çš„æé«˜æ•ˆç‡.

ä¹Ÿæœ‰äººè¯Ÿç—…stm323cubemxç”Ÿæˆçš„HALåº“å ç”¨å†…å­˜å¤§,ä»£ç æ‰§è¡Œæ•ˆç‡æ¯”æ ‡å‡†åº“ä½.ä½†æ˜¯è¿™äº›åœ¨ä¾¿æ·ä¸é«˜æ•ˆé¢å‰ä¸å€¼ä¸€æ,åƒstm323cubemxè¿™æ ·é€šè¿‡å›¾å½¢çš„æ–¹å¼é…ç½®åˆå§‹åŒ–ä»£ç å°†æ˜¯æœªæ¥çš„è¶‹åŠ¿.

1. ç‚¹å‡» â€œNextâ€

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬1æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

2. å‹¾é€‰ â€œI accept the terms of license agreementâ€,ç„¶åç‚¹å‡» â€œNextâ€

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬2æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

3. å‹¾é€‰ç¬¬ä¸€é¡¹,ç„¶åç‚¹å‡» â€œNextâ€

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬3æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

4. éœ€è¦æŒ‡å®šè½¯ä»¶çš„å®‰è£…è·¯å¾„,ç„¶åç‚¹å‡» â€œNextâ€

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬4æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

5. é»˜ç„¶å³å¯,ç‚¹å‡» â€œNextâ€

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬5æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

6. å®‰è£…è¿‡ç¨‹,ç­‰å¾…å®‰è£…å®Œæˆ.

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬6æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center

------

7. ç‚¹å‡» â€œDoneâ€,å®‰è£…å®Œæˆ.

.. figure:: ../media/stm32cubemxå®‰è£…ç¬¬7æ­¥.png
   :alt: stm32å•ç‰‡æœºèŠ¯ç‰‡å‹å·
   :width: 60%
   :align: center


2.3 ä¸‹è½½å™¨é©±åŠ¨å®‰è£…ğŸƒ
-----------------------------------------------------------

stm32å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä¸‹è½½å›ºä»¶,æœ€å¸¸æœ€ç”¨çš„æ˜¯é€šè¿‡swdæ¥å£çš„ä¸‹è½½å™¨ä¸‹è½½å›ºä»¶,æ”¯æŒswdæ¥å£çš„ä¸‹è½½å™¨æœ‰j-linkã€dap-linkã€st-link.è¯¾ç¨‹ä¸­ä½¿ç”¨dap-linkæ¥ä¸‹è½½å›ºä»¶.

2.3.1 j-linkä¸‹è½½å™¨é©±åŠ¨å®‰è£…ğŸƒ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

éƒ¨åˆ†j-linkä¸‹è½½å™¨åŒæ—¶æ‹¥æœ‰swdå’Œjtagæ¥å£,å¤§éƒ¨åˆ†çš„j-linkä¸‹è½½å™¨å–æ¶ˆäº†jtagæ¥å£åªä¿ç•™äº†swdæ¥å£.

1. ç‚¹å‡» â€œNextâ€

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬1æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬1æ­¥
   :width: 60%
   :align: center

------

2. ç‚¹å‡» â€œI Agreeâ€

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬2æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬2æ­¥
   :width: 60%
   :align: center

------

3. é€‰æ‹©å®‰è£…è·¯å¾„

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬3æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬3æ­¥
   :width: 60%
   :align: center

------

4. å®‰è£…è¿‡ç¨‹.

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬4æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬4æ­¥
   :width: 60%
   :align: center

-----

5. ç‚¹å‡» â€œOkâ€

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬5æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬5æ­¥
   :width: 60%
   :align: center

------

6. å®‰è£…å®Œæˆ

.. figure:: ../media/jlinké©±åŠ¨å®‰è£…ç¬¬6æ­¥.png
   :alt: jlinké©±åŠ¨å®‰è£…ç¬¬6æ­¥
   :width: 60%
   :align: center

------

2.3.2 st-linkä¸‹è½½å™¨é©±åŠ¨å®‰è£…ğŸƒ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. é€‰æ‹©64ä½å®‰è£….

.. figure:: ../media/st-linkå®‰è£…ç¬¬ä¸€æ­¥.png
   :alt: st-linkå®‰è£…ç¬¬1æ­¥
   :width: 60%
   :align: center

------

2.ç‚¹å‡» "ä¸‹ä¸€æ­¥".

.. figure:: ../media/st-linkå®‰è£…ç¬¬äºŒæ­¥.png
   :alt: st-linkå®‰è£…ç¬¬2æ­¥
   :width: 60%
   :align: center

------

3. é€‰æ‹© "å®‰è£…".

.. figure:: ../media/st-linkå®‰è£…ç¬¬ä¸‰æ­¥.png
   :alt: st-linkå®‰è£…ç¬¬3æ­¥
   :width: 60%
   :align: center

------

4. é€‰æ‹© "å®Œæˆ".

.. figure:: ../media/st-linkå®‰è£…ç¬¬å››æ­¥.png
   :alt: st-linkå®‰è£…ç¬¬4æ­¥
   :width: 60%
   :align: center

------

2.3.3 dap-linkä¸‹è½½å™¨é©±åŠ¨å®‰è£…ğŸƒ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

dap-linkä¸éœ€è¦æ‰‹åŠ¨å®‰è£…é©±åŠ¨è½¯ä»¶.

2.4 ch340ä¸²å£çº¿é©±åŠ¨ğŸƒ
-----------------------------------------------------------

å•ç‰‡æœºçš„ä¸²å£ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨:ç¬¬ä¸€ä¸ªæ˜¯ ``ä¸²å£é€šä¿¡`` ,æ¯”å¦‚ä¸ç”µè„‘è¿›è¡Œæ•°æ®çš„æ”¶å‘æˆ–è€…ä¸atæŒ‡ä»¤çš„è“ç‰™æ¨¡å—é€šä¿¡.ç¬¬äºŒä¸ªæ˜¯ä¸²å£isp ``å›ºä»¶ä¸‹è½½`` ,stm2ä¸»è¦é€šè¿‡ä¸‹è½½å™¨swdå’Œä¸²å£ispä¸¤ç§æ–¹å¼ä¸‹è½½å›ºä»¶.

ç”µè„‘ä¸Šæ²¡æœ‰ä¸²å£è¿™ä¸ªæ¥å£è€Œåªæœ‰usbæ¥å£,å› æ­¤éœ€è¦ä½¿ç”¨ä¸²å£çº¿å°†usbæ¥å£è½¬æ¢ä¸ºä¸²å£çš„æ¥å£,æ•™ç¨‹ä¸­ä½¿ç”¨ch340è¿™æ¬¾ä¸²å£çº¿.dap-linkæœ‰ä¸‹è½½å’Œä¸²å£ä¸¤ä¸ªåŠŸèƒ½åŠŸèƒ½,dap-linkçš„ä¸²å£æ˜¯ "è½¯ä»¶ä¸²å£",è€Œch340çš„ä¸²å£æ˜¯ "ç¡¬ä»¶ä¸²å£",åªæœ‰ch340çš„ä¸²å£å¯ä»¥ç”¨æ¥ä¸‹è½½ç¨‹åº,dap-linkçš„ä¸²å£ä¸èƒ½ç”¨äºä¸²å£ä¸‹è½½,ä½†æ˜¯ä½œä¸ºä¸²å£é€šä¿¡æ˜¯ä¸¤è€…çš„åŠŸèƒ½æ˜¯ä¸€è‡´çš„.

.. figure:: ../media/ch340ä¸²å£çº¿.png
   :alt: ch340ä¸²å£çº¿
   :width: 60%
   :align: center

------

åœ¨å®‰è£…å®Œæˆåæç¤º "é©±åŠ¨å®‰è£…æˆåŠŸ"æˆ–è€… "é©±åŠ¨é¢„å®‰è£…æˆåŠŸ".

.. figure:: ../media/ch340ä¸²å£é©±åŠ¨ä¸‹è½½.png
   :alt: ch340ä¸²å£é©±åŠ¨å®‰è£…ç•Œé¢
   :width: 60%
   :align: center

------

åœ¨ "è®¾å¤‡ç®¡ç†å™¨" ä¸­æŸ¥çœ‹è¯†åˆ«å‡ºæ¥çš„ä¸²å£çš„ç«¯å£å·.

.. figure:: ../media/ch340è¯†åˆ«ä¸²å£å·.png
   :alt: ch340è¯†åˆ«ä¸²å£ç«¯å£å·
   :width: 60%
   :align: center


